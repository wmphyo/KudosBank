const questionsSets = [
    [
        {
            passage: [
                `Impacts of Climate Change – Passage 1<br><br> 
                Victoria is Australia's smallest yet most densely populated and urbanized mainland state. It is the second most populous Australian state with approximately 5.6 million people. Melbourne is Victoria's largest city, home to more than 4 million people.<br><br> 
                Victoria contains many diverse environmental regions, ranging from the wet, temperate climate of Gippsland in the south-east to the snow-covered alpine areas in the north-east. There are also extensive semi-arid plains to the west and north-west of the state. The following information highlights some of the potential impacts and costs to the state's industries, infrastructure, environment and people from climate change.<br><br> 
                Climate change will lead to sea level rise which will impact on coastal settlements, infrastructure, and ecosystems. Between 31,000 and 48,000 residential buildings, with a current value of between $8 billion and $11 billion may be at risk of inundation from a sea level rise of 1.1 meters. A 1.1 meter sea level rise will also put up to 3500 kilometers of Victoria's roads, up to 125 kilometers of railways and up to 2000 commercial buildings at risk. These assets have an estimated value of up to $9.8 billion, $500 million and $12 billion respectively.<br><br> 
                Global sea levels increased by 1.7 millimeters per year over the 20th century. Over the past 15 years, this trend has increased to approximately 3.2 millimeters per year. This rate varies significantly around Australia. Since the early 1990s, the Victorian coast has experienced increases of between 2.6 and 2.8 millimeters per year.<br><br> 
                Much of Victoria lies within the Murray Darling Basin region where climate change is likely to have serious impacts on water resources. Projections indicate a 13 percent reduction in average surface water availability in the south of the Murray Darling Basin as a median outcome by 2030. The reduction would be greatest in the south-east where the majority of runoff is generated and where the impacts of climate change are expected to be greatest.<br><br> 
                In Melbourne, the average long-term stream flow into water supply catchments could be reduced by up to 11 percent by 2020, and as much as 35 percent by 2050.<br><br> 
    
                Impacts of Climate Change – Passage 2<br><br> 
    
                Impacts from climate change are happening now. Ecosystems and human communities are currently being affected. These impacts extend well beyond just an increase in temperature. They are happening in the United States, and across the globe. Multiple sectors of our society, spanning across regional boundaries, are being affected. Already impacted are things that we depend upon and value: water, energy, transportation, wildlife, agriculture, ecosystems, and human health.<br><br> 
                Across the country, changes to water resources are of critical concern. In some regions, particularly in the western United States, drought is an important factor. Conditions are critically affecting local communities. Less snow accumulation in the mountains is important in the West and Alaska where the snowpack stores water for later use. In the Midwest and northeastern states, the amount of heavy downpours has substantially increased over the past few decades. In many regions, floods and water quality problems are likely to be worse because of climate change.<br><br> 
                Our food supply is dependent on climate and weather conditions. Although agricultural practices may be adaptable, changes like increased temperatures, water stress, diseases, and weather extremes create significant challenges for the farmers and ranchers who put the food on our tables.<br><br> 
                Human health is vulnerable to climate change. The changing environment is expected to cause more heat stress, an increase in waterborne diseases, poor air quality, extreme weather events, and diseases transmitted by insects and rodents.<br><br> 
                Ecosystems are also being affected by the changes that are occurring: habitats are being modified, the timing of events such as flowering and egg laying are shifting, and species are changing their home ranges.<br><br> 
                Changes are also occurring to the ocean. The ocean is absorbing about 30% of the carbon dioxide that is being released into the atmosphere from the burning of fossil fuels. As a result, the ocean is becoming more acidic. Marine life is being affected by this ocean acidification. Along the coasts, higher sea levels cause these areas to be at a greater risk of erosion and storm surges.`
            ],
            question: "1. Which statement best describes a major difference between the point of view of passage 1 compared to the point of view of passage 2?",
            options: [
                "A. Passage 1 focuses on the impact climate change has on the water supply, while passage 2 focuses on the impact climate change has on sea levels.",
                "B. Passage 2 focuses on the impact climate change has on the water supply, while passage 1 focuses on the impact climate change has on sea levels.",
                "C. Passage 1 focuses on the impact climate change has on one specific geographical area, the Victorian coast, while passage 2 discusses the impact of climate change across the United States.",
                "D. Passage 1 focuses on the impact climate change has on infrastructure, while passage 2 focuses on the impact climate change has on infrastructure, industry, ecology, and human health."
            ],
            answer: "C",
            explanation: `Explanation: Passage 1 discusses the impact climate change is having on Australia’s state of Victoria. Passage 2 discusses the impact climate change is having across the United States, including flooding in the East and Midwest, and droughts in the West.`
        },
        {
            passage: [
                `Global Climate Change<br><br> 
    
                The current warming trend is of particular significance because most of it is extremely likely (greater than 95 percent probability) to be the result of human activity since the mid-20th century and proceeding at a rate that is unprecedented over decades to millennia.<br><br> 
    
                Earth-orbiting satellites and other technological advances have enabled scientists to see the big picture, collecting many different types of information about our planet and its climate on a global scale. This body of data, collected over many years, reveals the signals of a changing climate. 
    
                The heat-trapping nature of carbon dioxide and other gases was demonstrated in the mid-19th century. Their ability to affect the transfer of infrared energy through the atmosphere is the scientific basis of many instruments flown by NASA. There is no question that increased levels of greenhouse gases must cause the Earth to warm in response.<br><br> 
    
                Ice cores drawn from Greenland, Antarctica, and tropical mountain glaciers show that the Earth’s climate responds to changes in greenhouse gas levels. Ancient evidence can also be found in tree rings, ocean sediments, coral reefs, and layers of sedimentary rocks. This ancient, or paleoclimate, evidence reveals that current warming is occurring roughly ten times faster than the average rate of ice-age-recovery warming.<br><br> 
    
                The planet's average surface temperature has risen about 2.0 degrees Fahrenheit (1.1 degrees Celsius) since the late 19th century, a change driven largely by increased carbon dioxide and other human-made emissions into the atmosphere. Most of the warming occurred in the past 35 years, with 16 of the 17 warmest years on record occurring since 2001. Not only was 2016 the warmest year on record, but eight of the 12 months that make up the year — from January through September, with the exception of June — were the warmest on record for those respective months. 
    
                The oceans have absorbed much of this increased heat, with the top 700 meters (about 2,300 feet) of ocean showing warming of 0.302 degrees Fahrenheit since 1969.<br><br> 
    
                The Greenland and Antarctic ice sheets have decreased in mass. Data from NASA's Gravity Recovery and Climate Experiment show Greenland lost 150 to 250 cubic kilometers (36 to 60 cubic miles) of ice per year between 2002 and 2006, while Antarctica lost about 152 cubic kilometers (36 cubic miles) of ice between 2002 and 2005.`
            ],
            question: "2. Which statement best describes the passage's stance on climate change?",
            options: [
                "A. There is no definitive research that points to climate change.",
                "B. Global warming must be a hoax because many areas of the country recently have experienced severely cold weather.",
                "C. The notion that global warming is a hoax is a claim that is unsupported by the vast majority of research results and observable evidence.",
                "D. The Earth may be warming but there is no evidence it is due to human activity."
            ],
            answer: "C",
            explanation: `Explanation: The research cited by NASA clearly shows that global warming is no hoax and that it most likely is the result of human activity. As stated in the passage, “The current warming trend is of particular significance because most of it is extremely likely (greater than 95 percent probability) to be the result of human activity since the mid-20th century and proceeding at a rate that is unprecedented over decades to millennia.” The passage goes on to cite several examples of research and observable evidence that lends credence to the realities of global warming.`
        },
        {
            passage: [
                `Trump’s Third Travel Ban is Blocked – Passage 1<br><br> 
    
                President Donald Trump struck out again with his third try at a travel ban, as a federal judge temporarily blocked it from taking effect nationwide on Wednesday. 
    
                This time, Trump’s order was found to discriminate by using the nationality of travelers “as a proxy” for their security risk. In earlier rulings over two prior attempts at a travel ban, judges said they were motivated by bias against Muslims, Bloomberg reported.<br><br> 
    
                The administration vowed to keep fighting, and the case could again reach the US Supreme Court, which has so far appeared more receptive than lower-court judges to Trump’s efforts to curtail immigration. The raging battle, now in its ninth month, has spurred a constitutional confrontation that could define powers of the presidency for years to come. Trump hasn’t shown that the entry of more than 150 million nationals from six specified countries would be “detrimental to the interests of the United States," US District Judge Derrick Watson in Honolulu said in issuing a temporary restraining order against the administration.<br><br> 
    
                Federal immigration laws "do not afford the President unbridled discretion to do as he pleases," the judge said.<br><br> 
    
                Trump’s Third Travel Ban is Blocked – Passage 2<br><br> 
    
                On Tuesday and Wednesday, United States District Judges in two states issued rulings barring enforcement of part or all of the latest version of President Donald Trump's executive order forbidding people from specific countries from entering the United States.<br><br> 
    
                On Tuesday, in Hawaii, District Judge Derrick Watson issued a temporary block on enforcement. On Wednesday, in Maryland, District Judge Theodore D. Chuang blocked one of its stipulations on the grounds that it was an "inextricable re-animation of the twice-enjoined Muslim ban." The order was to have gone into effect Wednesday night and would have affected people from Iran, Libya, North Korea, Somalia, Yemen, Syria, Chad, and some Venezuelans.<br><br> 
    
                Watson, who previously ruled on another version of the order, ruled that the current ban "plainly discriminates based on nationality," "lacks sufficient findings that the entry of more than 150 million nationals from six specified countries would be 'detrimental to the interests of the United States'" and "suffers from precisely the same maladies as its predecessor."<br><br> 
    
                Chuang blocked the order's measure pertaining to anyone with a bona fide relationship to someone in the United States.<br><br> 
    
                White House press secretary Sarah Huckabee Sanders told the press, "The Department of Justice will vigorously defend the president's lawful action[...] These restrictions are vital to ensuring that foreign nations comply with the minimum security standards required for the integrity of our immigration system and the security of our nation."`
            ],
            question: "3. Which of the following statements was NOT a reason given by the US District Court Judges for blocking the Trump immigration ban?",
            options: [
                "A. Federal immigration laws do not give the president unlimited power to do as he pleases.",
                "B. The current ban plainly discriminates based on nationality.",
                "C. The ban lacks sufficient findings that the entry of immigrants from the six specified countries would be detrimental to the interests of the United States.",
                "D. The ban violates the due process clauses of the 5th and 14th Amendments to the US Constitution."
            ],
            answer: "D",
            explanation: `Explanation: Answer choices A, B, and C are cited in one of the two passages as reasons why the US District Court Judges blocked the immigration ban. There is no mention of the due process clauses in the US Constitution by either passage as being a reason for blocking the ban.`
        },
        {
            passage: [
                `Frederick Douglass Quote<br><br> 
    
                The slave is a man, "the image of God," but "a little lower than the angels;" possessing a soul, eternal and indestructible; capable of endless happiness, or immeasurable woe; a creature of hopes and fears, of affections and passions, of joys and sorrows, and he is endowed with those mysterious powers by which man soars above the things of time and sense, and grasps, with undying tenacity, the elevating and sublimely glorious idea of a God. It is such a being that is smitten and blasted. The first work of slavery is to mar and deface those characteristics of its victims which distinguish men from things, and persons from property. Its first aim is to destroy all sense of high moral and religious responsibility. It reduces man to a mere machine. It cuts him off from his Maker, it hides from him the laws of God and leaves him to grope his way from time to eternity in the dark, under the arbitrary and despotic control of a frail, depraved, and sinful fellow-man. As the serpent-charmer of India is compelled to extract the deadly teeth of his venomous prey before he is able to handle him with impunity, so the slaveholder must strike down the conscience of the slave before he can obtain the entire mastery over his victim.<br><br> 
    
                John C. Calhoun Quote <br><br> 
    
                I am a Southern man and a slaveholder. A kind and merciful one, I trust, and none the worse for being a slaveholder. I say, for one, I would rather meet any extremity upon earth than give up one inch of our equality, one inch of what belongs to us as members of this republic! What! Acknowledged inferiority! The surrender of life is nothing to sinking down into acknowledged inferiority!`
            ],
            question: "4. Which of the following quotes is a metaphor for the institution of slavery?",
            options: [
                "A. Calhoun: “I would rather meet any extremity on earth than give up one inch of our equality.”",
                "B. Douglass: “It [slavery] cuts him off from his Maker, it hides from him the laws of God.”",
                "C. Douglass: “As the serpent-charmer in India is compelled to extract the deadly teeth of his venomous prey before he is able to handle him with impunity.”",
                "D. Calhoun: “The surrender of life is nothing to sinking down into acknowledged inferiority!”"
            ],
            answer: "C",
            explanation: `Explanation: Frederick Douglass uses the example of a snake-charmer from India pulling the teeth of their snake in order to safely handle them as a metaphor for slaveholders stripping slaves of their dignity and conscience in order to safely control their slaves.`
        },
        {
            passage: [
                `The Truman Doctrine, 1947<br><br>
    
                With the Truman Doctrine, President Harry S. Truman established that the United States would provide political, military, and economic assistance to democratic nations under threat from authoritarian forces. The Truman Doctrine reoriented US foreign policy away from its stance of withdrawal from regional conflicts not involving the United States, to one of intervention in far away conflicts. <br><br> 
    
                The Truman Doctrine arose from a speech delivered by President Truman before Congress on March 12, 1947. The cause for the speech was the British Government’s announcement that it would end military and economic assistance to the Greek Government in its civil war against the Greek Communist Party. Truman asked Congress to support the Greek Government against the Communists. He also asked Congress to provide assistance for Turkey, since it had previously been dependent on British aid. <br><br> 
    
                At the time, the US Government believed that the Soviet Union supported the Greek Communist war effort. It worried that if the Communists prevailed, the Soviets would influence Greek policy. Because of the deteriorating relationship with the Soviet Union, the withdrawal of British assistance to Greece caused the Truman Administration to reorient American foreign policy. Accordingly, President Truman requested that Congress provide $400,000,000 of aid to the Greek and Turkish Governments. He also requested support for the dispatch of American civilian and military personnel and equipment to the region. <br><br> 
    
                Truman justified his request on two grounds. He argued that a Communist victory in the Greek Civil War would endanger the political stability of Turkey. An unstable Turkey would undermine the stability of the Middle East. This could not be allowed because of the region’s importance to US national security. Truman also argued that the United States was compelled to assist “free peoples” in their struggles against “totalitarian regimes.” He believed the spread of authoritarianism would “undermine the foundations of international peace and the security of the United States.” <br><br> 
    
                Truman argued that the United States could not allow the expansion of Soviet totalitarianism into independent nations. American national security depended upon more than the physical security of American territory, he argued. Traditionally, the United States had avoided foreign commitments beyond the Western Hemisphere during peacetime. Now, however, the Truman Doctrine committed the United States to preserving the political integrity of democratic nations when it was in the best interest of the United States.`
            ],
            question: "5. What effect did the Truman Doctrine have on US foreign policy?",
            options: [
                "A. It brought the United States into the Second World War.",
                "B. It limited the United States’ sphere of influence to the Western Hemisphere.",
                "C. It changed the course of US policy, involving the United States in far away conflict in which it was not directly involved.",
                "D. It did not have a significant impact on American foreign policy."
            ],
            answer: "C",
            explanation: `Explanation: The Truman Doctrine changed the course of US policy, involving the United States in a far away conflict in which it was not directly involved. The passage states: “With the Truman Doctrine, President Harry S. Truman established that the United States would provide political, military, and economic assistance to democratic nations under threat from authoritarian forces. The Truman Doctrine reoriented US foreign policy away from its stance of withdrawal from regional conflicts not involving the United States, to one of intervention in far away conflicts.”`
        },
    ],
    // Add more question sets as needed
];

let currentQuestionIndex = 0;
let userAnswers = [];
let score = 0;
let currentQuestionSet = 0;

function loadQuestion() {
    const passageContainer = document.querySelector('.passage');
    const questionContainer = document.querySelector('.multiple-choice');
    const currentQuestion = questionsSets[currentQuestionSet][currentQuestionIndex];

    passageContainer.innerHTML = `<p>${currentQuestion.passage}</p>`;

    questionContainer.innerHTML = `
        <p>${currentQuestion.question}</p>
        ${currentQuestion.options.map(option => `
            <label><input type="radio" name="question" value="${option.charAt(0)}"> ${option}</label>
        `).join('')}
        <p class="feedback" id="feedback"></p>
        <p class="explanation" id="explanation"></p>
    `;
}

function nextQuestion() {
    currentQuestionIndex++;
    if (currentQuestionIndex < questionsSets[currentQuestionSet].length) {
        loadQuestion();
        document.getElementById('btnCheck').style.display = 'block';
        document.getElementById('btnNext').style.visibility = 'hidden';
    } else {
        if (currentQuestionSet < questionsSets.length - 1) {
            showResults();
        } else {
            showFinalResults();
        }
    }
}

function checkAnswer() {
    const selectedOption = document.querySelector('input[name="question"]:checked');
    const feedback = document.getElementById('feedback');
    const explanation = document.getElementById('explanation');

    if (selectedOption) {
        const answer = selectedOption.value;
        userAnswers.push(answer);

        if (answer === questionsSets[currentQuestionSet][currentQuestionIndex].answer) {
            feedback.textContent = "Correct!";
            feedback.className = "feedback correct";
            score++;
        } else {
            feedback.textContent = "Incorrect.";
            feedback.className = "feedback incorrect";
        }
        explanation.textContent = questionsSets[currentQuestionSet][currentQuestionIndex].explanation;
        if (currentQuestionIndex === 4) {
            document.getElementById('btnCheck').style.display = 'none';
            document.getElementById('btnNext').style.visibility = 'visible';
            document.getElementById('btnNext').innerHTML = "Show Result";
        } else {
            document.getElementById('btnCheck').style.display = 'none';
            document.getElementById('btnNext').style.visibility = 'visible';
        }
        console.log(currentQuestionIndex);
    } else {
        feedback.textContent = "Please select an answer.";
        feedback.className = "feedback incorrect";
    }
}

function showResults() {
    const passageContainer = document.querySelector('.passage');

    passageContainer.innerHTML = `
        <div class="result-summary">
            <h2>Set ${currentQuestionSet + 1} Results</h2>
            <p>Your score: <span class="score">${score}</span> out of <span class="total">${questionsSets[currentQuestionSet].length}</span></p>
        </div>
        <div class="answer-review">
            <h3>Review Your Answers</h3>
            <ol class="review-list">
                ${userAnswers.map((answer, index) => `
                    <li class="review-item">
                        <p>Your answer: <span class="user-answer ${answer === questionsSets[currentQuestionSet][index].answer ? 'correct' : 'incorrect'}">${answer}</span></p>
                        <p>Correct answer: <span class="correct-answer">${questionsSets[currentQuestionSet][index].answer}</span></p>
                        <p class="explanation">${questionsSets[currentQuestionSet][index].explanation}</p>
                    </li>
                `).join('')}
            </ol>
        </div>
        <button id="next-set-btn" onclick="nextSet()">Next Set</button>
    `;
    document.getElementById('btnNext').style.visibility = 'hidden';
}

function showFinalResults() {
    const box = document.querySelector('.box');
    // passageContainer.style.flex-basis = '100%';

    const questionContainer = document.querySelector('.multiple-choice');
    questionContainer.style.display = 'none';


    box.innerHTML = `
        <div class='final-result'>
            <div class="result-summary">
                <h2>Final Results</h2>
                <p>Your overall score: <span class="score">${score}</span> out of <span class="total">${calculateTotalQuestions()}</span></p>
            </div>
            <div class="answer-review">
                <h3>Review Your Answers</h3>
                <ol class="review-list">
                    ${userAnswers.map((answer, index) => `
                        <li class="review-item">
                            <p>Your answer: <span class="user-answer ${answer === questionsSets[currentQuestionSet][index].answer ? 'correct' : 'incorrect'}">${answer}</span></p>
                            <p>Correct answer: <span class="correct-answer">${questionsSets[currentQuestionSet][index].answer}</span></p>
                            <p class="explanation">${questionsSets[currentQuestionSet][index].explanation}</p>
                        </li>
                    `).join('')}
                </ol>
            </div>
        </div>
        `;
    document.getElementById('btnNext').style.display = 'none';
    document.getElementById('btnGoBack').style.display = 'block';
}

function calculateTotalQuestions() {
    let total = 0;
    for (let i = 0; i < questionsSets.length; i++) {
        total += questionsSets[i].length;
    }
    return total;
}


window.onload = loadQuestion;
const questionsSets = [
    [
        {
            passage: [
                `In the Supreme Court case Plessy v. Ferguson, which statement best describes the position of the minority, provided by Justice John Marshall Harlan? 
    
                Plessy v. Ferguson, Majority Opinion<br><br> 
    
                In 1891, a group of concerned young black men of New Orleans formed the “Citizens’ Committee to Test the Constitutionality of the Separate Car Law.” They raised money and engaged Albion W. Tourgée, a prominent Radical Republican author, and politician, as their lawyer. On May 15, 1892, the Louisiana State Supreme Court decided in favor of the Pullman Company’s claim that the law was unconstitutional as it applied to interstate travel. Encouraged, the committee decided to press a test case on intrastate travel. With the cooperation of the East Louisiana Railroad, on June 7, 1892, Homer Plessy, a mulatto (7/8 white), seated himself in a white compartment, was challenged by the conductor and was arrested and charged with violating the state law. In the Criminal District Court for the Parish of Orleans, Tourgée argued that the law requiring “separate but equal accommodations” was unconstitutional. When Judge John H. Ferguson ruled against him, Plessy applied to the State Supreme Court for a writ of prohibition and certiorari. Although the court upheld the state law, it granted Plessy’s petition for a writ of error that would enable him to appeal the case to the Supreme Court. <br><br> 
    
                In 1896, the Supreme Court issued its decision in Plessy v. Ferguson. Justice Henry Brown of Michigan delivered the majority opinion, which sustained the constitutionality of Louisiana’s Jim Crow law. In part, he said: <br><br> 
    
                “We consider the underlying fallacy of the plaintiff’s argument to consist in the assumption that the enforced separation of the two races stamps the colored race with a badge of inferiority. If this be so, it is not by reason of anything found in the act, but solely because the colored race chooses to put that construction upon it… The argument also assumes that social prejudice may be overcome by legislation and that equal rights cannot be secured except by an enforced commingling of the two races… If the civil and political rights of both races be equal, one cannot be inferior to the other civilly or politically. If one race be inferior to the other socially, the Constitution of the United States cannot put them upon the same plane.” <br><br> 
    
                Plessy v. Ferguson, Dissenting Opinion <br><br> 
    
                In a powerful dissent, conservation Kentuckian John Marshall Harlan wrote: <br><br> 
    
                “I am of the opinion that the statute of Louisiana is inconsistent with the personal liberties of citizens, white and black, in that State, and hostile to both the spirit and the letter of the Constitution of the United States. If laws of like character should be enacted in the several States of the Union, the effect would be in the highest degree mischievous. Slavery as an institution tolerated by law would, it is true, have disappeared from our country, but there would remain a power in the States, by sinister legislation, to interfere with the blessings of freedom; to regulate civil rights common to all citizens, upon the basis of race; and to place in a condition of legal inferiority a large body of American citizens, now constituting a part of the political community, called the people of the United States, for whom and by whom, through representatives, our government is administrated. Such a system is inconsistent with the guarantee given by the Constitution to each State of a republican form of government, and may be stricken down by congressional action, or by the courts in the discharge of their solemn duty to maintain the supreme law of the land, anything in the Constitution or laws of any State to the contrary notwithstanding.” <br><br> 
    
                Indeed, it was not until the Supreme Court’s decision in Brown v. Board of Education of Topeka, Kansas and congressional civil rights acts of the 1950s and 1960s that systematic segregation under state law was ended. In the wake of those Federal actions, many states amended or rewrote their state constitutions to conform with the spirit of the 14th Amendment. But for Homer Plessy, the remedies came too late.`
            ],
            question: "1. In the Supreme Court case Plessy v. Ferguson, which statement best describes the position of the minority, provided by Justice John Marshall Harlan?",
            options: [
                "A. It is up to black Americans to vote for politicians who are sympathetic to their cause.",
                "B. If the accommodations for blacks are truly equal then the separate but equal policy can be enforced.",
                "C. The Supreme Court has no jurisdiction over laws regarding intrastate transportation.",
                "D. The Louisiana law forcing blacks to ride in separate railroad cars is an invasion of their personal and civil liberties as citizens of the United States."
            ],
            answer: "D",
            explanation: `Explanation: The dissenting, or minority, opinion offered by Justice John Marshall Harlan, stated that the concept of separate but equal is an invasion of the black race’s civil liberties. As Harlan stated, “I am of the opinion that the statute of Louisiana is inconsistent with the personal liberties of citizens, white and black, in that State, and hostile to both the spirit and the letter of the Constitution of the United States.”`
        },
        {
            passage: [
                `What was Winston Churchill implying when he referred to Lend-Lease Act as “the most unsordid act one nation had ever done for another”? 
    
                Lend-Lease Epilog <br><br> 
    
                The United Kingdom was not the only nation to strike such a deal with the United States. Over the course of the war, the United States contracted Lend-Lease agreements with more than 30 countries, dispensing some $50 billion in assistance. Although British Prime Minister Winston Churchill later referred to the initiative as “the most unsordid act” one nation had ever done for another, Roosevelt’s primary motivation was not altruism or disinterested generosity. Rather, Lend-Lease was designed to serve America’s interest in defeating Nazi Germany without entering the war until the American military and public were prepared to fight. At a time when the majority of Americans opposed direct participation in the war, Lend-Lease represented a vital US contribution to the fight against Nazi Germany. Moreover, the joint action called for under Article VII of the Lend-Lease agreements signed by the United States and the recipient nations laid the foundation for the creation of a new international economic order in the postwar world.`
            ],
            question: "2. What was Winston Churchill implying when he referred to Lend-Lease Act as “the most unsordid act one nation had ever done for another”?",
            options: [
                "A. It was a despicable act on the part of the United States.",
                "B. It was an obvious act of self-preservation on the part of the United States.",
                "C. It was a pragmatic action on the part of the United States.",
                "D. It was an extremely noble act on the part of the United States."
            ],
            answer: "D",
            explanation: `Explanation: Sordid means “despicable or ignoble”; therefore, unsordid would be the opposite of “despicable or ignoble.” Churchill was stating that it was an extremely noble act by the United States to provide Allied nations with supplies to fight Germany for minimal considerations in return.`
        },
        {
           passage: "American Isolationism – 1930s <br><br> The Japanese invasion of Manchuria and subsequent push to gain control over larger expanses of Northeast China in 1931 led President Herbert Hoover and his Secretary of State, Henry Stimson, to establish the Stimson Doctrine, which stated that the United States would not recognize the territory gained by aggression and in violation of international agreements. With the Stimson Doctrine, the United States expressed concern over the aggressive action without committing itself to any direct involvement or intervention. <br><br> Other conflicts, including the Italian invasion of Ethiopia and the Spanish Civil War, also resulted in virtually no official commitment or action from the United States Government. Upon taking office, President Franklin Delano Roosevelt tended to see a necessity for the United States to participate more actively in international affairs, but his ability to apply his personal outlook to foreign policy was limited by the strength of isolationist sentiment in the US Congress. <br><br> In 1933, President Roosevelt proposed a Congressional measure that would have granted him the right to consult with other nations to place pressure on aggressors in international conflicts. The bill ran into strong opposition from the leading isolationists in Congress, including progressive politicians such as Senators Hiram Johnson of California, William Borah of Idaho, and Robert La Follette of Wisconsin. <br><br> In 1935, controversy over US participation in the World Court elicited similar opposition. As tensions rose in Europe over Nazi Germany’s aggressive maneuvers, Congress pushed through a series of Neutrality Acts, which served to prevent American ships and citizens from becoming entangled in outside conflicts. Roosevelt lamented the restrictive nature of the acts, but because he still required Congressional support for his domestic New Deal policies, he reluctantly acquiesced. <br><br> The isolationists were a diverse group, including progressives and conservatives, business owners and peace activists, but because they faced no consistent, organized opposition from internationalists, their ideology triumphed time and again. Roosevelt appeared to accept the strength of the isolationist elements in Congress until 1937. In that year, as the situation in Europe continued to grow worse and the Second Sino-Japanese War began in Asia, the President gave a speech in which he likened international aggression to a disease that other nations must work to “quarantine.” <br><br> At that time, however, Americans were still not prepared to risk their lives and livelihoods for peace abroad. Even the outbreak of war in Europe in 1939 did not suddenly diffuse popular desire to avoid international entanglements. Instead, public opinion shifted from favoring complete neutrality to supporting limited US aid to the Allies short of actual intervention in the war. The surprise Japanese attack on the US Navy at Pearl Harbor in December of 1941 served to convince the majority of Americans that the United States should enter the war on the side of the Allies.",
        question: "3. Which of the following describes the purpose of the Stimson Doctrine?",
        options: [
            "a policy stating the United States would not recognize any territory gained by aggression",
            "a policy stating the United States would come to the aid of any country attacked without provocation by another country",
            "a policy stating that the United States would continue to look for opportunities to expand their influence throughout the world",
            "a policy stating that the United States would take no action when there were disputes between countries in Europe or Asia"
        ],
        correctAnswer: "A",
        explanation: "Explanation:  stated in the passage, “The Japanese invasion of Manchuria and subsequent push to gain control over larger expanses of Northeast China in 1931 led President Herbert Hoover and his Secretary of State, Henry Stimson, to establish the Stimson Doctrine, which stated that the United States would not recognize the territory gained by aggression and in violation of international agreements. With the Stimson Doctrine, the United States expressed concern over the aggressive action without committing itself to any direct involvement or intervention.”  " },
        {
            passage: "Luddites – Passage 1 <br><br> The machine-breaking disturbances that rocked the wool and cotton industries were known as the 'Luddite riots'. The Luddites were named after ‘General Ned Ludd’ or ‘King Ludd’, a mythical figure who lived in Sherwood Forest and supposedly led the movement. <br><br>   They began in Nottinghamshire in 1811 and quickly spread throughout the country, especially to the West Riding of Yorkshire and Lancashire in 1812, and also to Leicestershire and Derbyshire. In Yorkshire, they wanted to get rid of the new machinery that was causing unemployment among workers. Hand weavers did not want the introduction of power looms. In Nottinghamshire, they protested against wage reductions. <br><br>   Workers sent threatening letters to employers and broke into factories to destroy the new machines, such as the new wide weaving frames. They also attacked employers, magistrates, and food merchants. There were fights between Luddites and government soldiers. <br><br>  To catch the culprits, men were engaged to guard the factories and rewards were offered for information. The government sent thousands of troops to the areas where there had been trouble. In 1812, machine-breaking became a crime punishable by death and 17 men were executed the following year. The Luddites were very effective, and some of their biggest actions involved as many as a hundred men, but there were relatively few arrests and executions. This may be because they were protected by their local communities. <br><br>  disturbances continued for another five years. The crisis was made worse by food shortages as the price of wheat increased, and by the collapse of hosiery and knitwear prices in 1815 and 1816. Various attempts were made to find a compromise, but problems remained until the middle of the nineteenth century, by which time the woolen industry had moved away from hand-production. <br><br>  Luddites – Passage 2 <br><br>  What can a 19th-century rebellion against automation teach us about the coming war– the robots are coming!– in the job market? <br><br>   Clive Thompson, an author, and journalist at the New York Times Magazine and Wired revisited Luddite’s history in an article for The Smithsonian to see what it could teach us. As machine learning and robotics consume manufacturing and white-collar jobs alike, the 200-year-old rebellion’s implications for automation are more relevant than ever, says  Thompson: <br><br> “The lesson you get from the end of the Luddites is: Do the people that are profiting off automation today want to participate in distributing their profits more widely around the population or are they going to fight just as hard as they did back then?” <br><br>  That economic and political question is hanging over western democracies coping with a wave of populism seemingly tracking a widening gap between stagnant wages and ballooning wealth at the top. While automation eventually tends to create new jobs even after it destroys old ones, that’s little consolation for millions of workers whose skills and experience are obsolete. <br><br> ",
            question: "4. Which of the following describes the purpose of the Stimson Doctrine? ",
            options: [
                "A. Passage 1 discusses the textile industry, while passage 2 discusses the computer and robotics industries.",
                "B. Passage 2 discusses the textile industry, while passage 1 discusses the computer and robotics industries.",
                "C. Passage 1 discusses unemployment for blue collar workers, while passage 2 discusses unemployment for white collar workers.",
                "D. Passage 2 discusses unemployment for blue collar workers, while passage 1 discusses unemployment for white collar workers."
            ],
            correctAnswer: "A",
            explanation: "Passage 1 focuses on the historical context of the Luddite movement in the early 19th century, specifically in the wool and cotton industries in England. It describes the protests against new machinery and wage reductions. Passage 2, however, discusses the relevance of the Luddite movement today in the context of automation, machine learning, and robotics impacting modern labor markets, including both manufacturing and white-collar jobs."
        },
        {
            passage: "Natural Monopolies <br><br> Natural monopolies occur when a single firm is able to serve the entire market demand at a lower cost than any combination of two or more smaller firms. For example, imagine there are two firms in a natural monopoly's market and each of them produces half of the quantity that the monopoly produces. The total cost of the natural monopoly is lower than the sum of the total costs of two firms producing the same quantity. <br><br>  A natural monopoly's cost structure is very different from that of most industries. In other industries, the marginal cost initially decreases due to economies of scale, then increases as the company experiences growing pains (as employees become overworked, the firm's bureaucracy expands, etc.). Along with this, the average cost of production decreases and then increases. In contrast, a natural monopoly will have a marginal cost that is constant or declining, and an average total cost that drops as the quantity of output increases. <br><br>  Natural monopolies tend to form in industries where there are high fixed costs. A firm with high fixed costs requires a large number of customers in order to have a meaningful return on investment. As it gains market share and increases its output, the fixed cost is divided among a larger number of customers. Therefore, in industries with large initial investment requirements, average total costs decline as output increases. Once a natural monopoly has been established, there will be high barriers to entry for other firms because of the large initial cost and because it would be difficult for the entrant to capture a large enough part of the market to achieve the same low costs as the monopolist. <br><br> Examples of natural monopolies are water and electricity services. For both of these, fixed costs of building the necessary infrastructure are high. The cost of constructing a competing transmission network and delivering service will be so high that it effectively bars potential competitors from entering the monopolist's market. <br><br>",
            question: "5. According to the passage, why is it difficult for new firms to enter an industry in which there is a natural monopoly? ",
            options: [
                "A. There are a lot of permits and licenses required. ",
                "B. The average total costs drop as the quantities of output increases. ",
                "C. There are regulations that set caps on pollution. ",
                "D. There is a large initial cost and the market is already cornered. "
            ],
            answer: "D",
            explanation: `Explanation:  The answer is found in the following excerpt, “Once a natural monopoly has been established, there will be high barriers to entry for other firms because of the large initial cost and because it would be difficult for the entrant to capture a large enough part of the market to achieve the same low costs as the monopolist.” The other answer choices are not suggested by the passage. `
        },
    ],
    // Add more question sets as needed
];

let currentQuestionIndex = 0;
let userAnswers = [];
let score = 0;
let currentQuestionSet = 0;

function loadQuestion() {
    const passageContainer = document.querySelector('.passage');
    const questionContainer = document.querySelector('.multiple-choice');
    const currentQuestion = questionsSets[currentQuestionSet][currentQuestionIndex];

    passageContainer.innerHTML = `<p>${currentQuestion.passage}</p>`;

    questionContainer.innerHTML = `
        <p>${currentQuestion.question}</p>
        ${currentQuestion.options.map(option => `
            <label><input type="radio" name="question" value="${option.charAt(0)}"> ${option}</label>
        `).join('')}
        <p class="feedback" id="feedback"></p>
        <p class="explanation" id="explanation"></p>
    `;
}

function nextQuestion() {
    currentQuestionIndex++;
    if (currentQuestionIndex < questionsSets[currentQuestionSet].length) {
        loadQuestion();
        document.getElementById('btnCheck').style.display = 'block';
        document.getElementById('btnNext').style.visibility = 'hidden';
    } else {
        if (currentQuestionSet < questionsSets.length - 1) {
            showResults();
        } else {
            showFinalResults();
        }
    }
}

function checkAnswer() {
    const selectedOption = document.querySelector('input[name="question"]:checked');
    const feedback = document.getElementById('feedback');
    const explanation = document.getElementById('explanation');

    if (selectedOption) {
        const answer = selectedOption.value;
        userAnswers.push(answer);

        if (answer === questionsSets[currentQuestionSet][currentQuestionIndex].answer) {
            feedback.textContent = "Correct!";
            feedback.className = "feedback correct";
            score++;
        } else {
            feedback.textContent = "Incorrect.";
            feedback.className = "feedback incorrect";
        }
        explanation.textContent = questionsSets[currentQuestionSet][currentQuestionIndex].explanation;
        if (currentQuestionIndex === 4) {
            document.getElementById('btnCheck').style.display = 'none';
            document.getElementById('btnNext').style.visibility = 'visible';
            document.getElementById('btnNext').innerHTML = "Show Result";
        } else {
            document.getElementById('btnCheck').style.display = 'none';
            document.getElementById('btnNext').style.visibility = 'visible';
        }
        console.log(currentQuestionIndex);
    } else {
        feedback.textContent = "Please select an answer.";
        feedback.className = "feedback incorrect";
    }
}

function showResults() {
    const passageContainer = document.querySelector('.passage');

    passageContainer.innerHTML = `
        <div class="result-summary">
            <h2>Set ${currentQuestionSet + 1} Results</h2>
            <p>Your score: <span class="score">${score}</span> out of <span class="total">${questionsSets[currentQuestionSet].length}</span></p>
        </div>
        <div class="answer-review">
            <h3>Review Your Answers</h3>
            <ol class="review-list">
                ${userAnswers.map((answer, index) => `
                    <li class="review-item">
                        <p>Your answer: <span class="user-answer ${answer === questionsSets[currentQuestionSet][index].answer ? 'correct' : 'incorrect'}">${answer}</span></p>
                        <p>Correct answer: <span class="correct-answer">${questionsSets[currentQuestionSet][index].answer}</span></p>
                        <p class="explanation">${questionsSets[currentQuestionSet][index].explanation}</p>
                    </li>
                `).join('')}
            </ol>
        </div>
        <button id="next-set-btn" onclick="nextSet()">Next Set</button>
    `;
    document.getElementById('btnNext').style.visibility = 'hidden';
}

function showFinalResults() {
    const box = document.querySelector('.box');
    // passageContainer.style.flex-basis = '100%';

    const questionContainer = document.querySelector('.multiple-choice');
    questionContainer.style.display = 'none';


    box.innerHTML = `
        <div class='final-result'>
            <div class="result-summary">
                <h2>Final Results</h2>
                <p>Your overall score: <span class="score">${score}</span> out of <span class="total">${calculateTotalQuestions()}</span></p>
            </div>
            <div class="answer-review">
                <h3>Review Your Answers</h3>
                <ol class="review-list">
                    ${userAnswers.map((answer, index) => `
                        <li class="review-item">
                            <p>Your answer: <span class="user-answer ${answer === questionsSets[currentQuestionSet][index].answer ? 'correct' : 'incorrect'}">${answer}</span></p>
                            <p>Correct answer: <span class="correct-answer">${questionsSets[currentQuestionSet][index].answer}</span></p>
                            <p class="explanation">${questionsSets[currentQuestionSet][index].explanation}</p>
                        </li>
                    `).join('')}
                </ol>
            </div>
        </div>
        `;
    document.getElementById('btnNext').style.display = 'none';
    document.getElementById('btnGoBack').style.display = 'block';
}

function calculateTotalQuestions() {
    let total = 0;
    for (let i = 0; i < questionsSets.length; i++) {
        total += questionsSets[i].length;
    }
    return total;
}


window.onload = loadQuestion;
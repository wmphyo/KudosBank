const questionsSets = [
    [
        {
            passage: [`
            Although command economies have a very centralized structure for economic decisions, market economies have a very decentralized structure. A market is an institution that brings together buyers and sellers of goods or services, who may be either individuals or businesses. The New York Stock Exchange is a prime example of a market in which buyers and sellers are brought together. In a market economy, decision-making is decentralized. Market economies are based on private enterprise: the means of production (resources and businesses) are owned and operated by private individuals or groups of private individuals. Businesses supply goods and services based on demand. (In a command economy, by contrast, resources and businesses are owned by the government.) What goods and services are supplied depends on what is demanded. A person’s income is based on his or her ability to convert resources (especially labor) into something that society values. The more society values the person’s output, the higher the income (think Lady Gaga or LeBron James). In this scenario, economic decisions are determined by market forces, not governments.<br><br> 
            
            Most economies in the real world are mixed; they combine elements of command and market (and even traditional) systems. The U.S. economy is positioned toward the market-oriented end of the spectrum. Many countries in Europe and Latin America, while primarily market-oriented, have a greater degree of government involvement in economic decisions than does the U.S. economy. China and Russia, while they are closer to having a market-oriented system now than several decades ago, remain closer to the command economy end of the spectrum. `,
                ],
            question: "1. According to the passage, what is the best definition of a market? ",
            options: [
                "A. a system with a centralized decision-making structure ",
                "B. an economy in which businesses and resources are owned by the government ",
                "C. an institution that brings together buyers and sellers of goods or services ",
                "D. an economy that combines elements of command and traditional systems "
            ],
            answer: "C",
            explanation: "Explanation: The answer is found in the following excerpt, “A market is an institution that brings together buyers and sellers of goods or services, who may be either individuals or businesses.” Of the other answer choices, answer choices A and B refer to command economies, and answer choice D refers to a mixed economy. "
        },
        {
            passage: [`How Individuals Do the Best They Can, and How They Resolve the Trade-off between Earnings and Free Time <br><br> 

 

            Decision making under scarcity is a common problem because we usually have limited means available to meet our objectives. Economists model these situations, first by defining all of the feasible actions, then evaluating which of these actions is best, given the objectives. Opportunity costs describe the unavoidable trade-offs in the presence of scarcity: satisfying one objective more means satisfying other objectives less. A model of decision making under scarcity can be applied to the question of how much time to spend working, when facing a trade-off between more free time and more income. This model also helps to explain differences in the hours that people work in different countries, and the changes in our hours of work throughout history. <br><br> 
            
            The idea of suddenly receiving a six-fold increase in your hourly wage and being able to choose your own hours of work might not seem very realistic. But we know that technological progress since the Industrial Revolution has been accompanied by a dramatic rise in wages. In fact, the average real hourly earnings of American workers did increase more than six-fold during the twentieth century. And while employees ordinarily cannot just tell their employer how many hours they want to work, over long time periods the typical hours that we work do change. In part, this is a response to how much we prefer to work. As individuals, we can choose part-time work, although this may restrict our job options. Political parties also respond to the preferences of voters, so changes in typical working hours have occurred in many countries as a result of legislation that imposes maximum working hours. `,
                ],
            question: "2. What is a potential critique of the individual choice model in the trade-off between income and free time? ",
            options: [
                "A. Human beings don’t always rationally trade-off according to their feasible actions. ",
                "B. It is uncommon for workers to have the freedom to decide how many hours they would like to work.",
                "C. Both A and B",
                "D. None of the above"
            ],
            answer: "C",
            explanation: "Explanation: The theory of rational choice is often used as an economic premise but may not describe how human beings actually make decisions. Similarly, the choice to reduce (or increase) one’s working hours at will is seldom a realistic way of optimizing free time and income. "
        },
        {
            passage: ['Excerpt from The Federalist Papers – Federalist No. 10 (James Madison) <br><br> From this view of the subject it may be concluded that a pure democracy, by which I mean a society consisting of a small number of citizens, who assemble and administer the government in person, can admit of no cure for the mischiefs of faction. A common passion or interest will, in almost every case, be felt by a majority of the whole; a communication and concert result from the form of government itself; and there is nothing to check the inducements to sacrifice the weaker party or an obnoxious individual. Hence it is that such democracies have ever been spectacles of turbulence and contention; have ever been found incompatible with personal security or the rights of property; and have in general been as short in their lives as they have been violent in their deaths. Theoretic politicians, who have patronized this species of government, have erroneously supposed that by reducing mankind to a perfect equality in their political rights, they would, at the same time, be perfectly equalized and assimilated in their possessions, their opinions, and their passions. ',
                ],
            question: "3. According to Madison, how effective is this “pure democracy” when it comes to protecting members of the society and their rights? ",
            options: [
                "A. Pure democracy is the most effective form of government at protecting individuals and their rights. ",
                "B. Pure democracy is an effective form of government to protect individuals and their rights, but not the most effective. ",
                "C. Pure democracy is not an effective form of government for protecting individuals and their rights. ",
                "D. No position is stated on the effectiveness of pure democracy in protecting individuals and their rights. "
            ],
            answer: "C",
            explanation: "Explanation: James Madison did not believe that “pure democracy” was an effective means of protecting individuals or their rights. He felt that the influence of majorities would lead to the “sacrifice of the weaker party.” According to him, “such democracies . . . have ever been found incompatible with personal security or the rights of property; and have in general been as short in their lives as they have been violent in their deaths.” "
        },
        {
            passage: "Human Changes to the Environment<br><br> An environment is the surroundings and conditions in which a person, animal, or plant lives. It is a combination of all the physical, chemical, and biological factors acting upon the area in which an organism lives. Human activities have had a significant impact on the environment. Urbanization, deforestation, and agricultural practices have greatly changed the Earth and have had effects on both the abiotic (non-living parts of an ecosystem)and biotic (living parts of an ecosystem) parts of the environment. Either as a direct result of human activities, or as a secondary effect of human actions, air pollution, water pollution, and soil pollution are all areas in which human actions and activities have had a lasting negative impact on the environment. ",
            question: "4. Which of the following human activities has had an effect on the Earth and its environment?",
            options: [
                "A. agricultural practices ",
                "B. deforestation ",
                "C. urbanization ",
                "D. All of the above "
            ],
            answer: "D",
            explanation: "Explanation: Agriculture, deforestation, and urbanization have all had an effect on the Earth and its environment. As stated in the passage, “Urbanization, deforestation, and agricultural practices have greatly changed the Earth and have had effects on both the abiotic (non-living parts of an ecosystem) and biotic (living parts of an ecosystem) parts of the environment.” "
        },
        {
            passage: 'Frederick Douglass Quote<br><br> The slave is a man, "the image of God," but "a little lower than the angels;" possessing a soul, eternal and indestructible; capable of endless happiness, or immeasurable woe; a creature of hopes and fears, of affections and passions, of joys and sorrows, and he is endowed with those mysterious powers by which man soars above the things of time and sense, and grasps, with undying tenacity, the elevating and sublimely glorious idea of a God. It is such a being that is smitten and blasted. The first work of slavery is to mar and deface those characteristics of its victims which distinguish men from things, and persons from property. Its first aim is to destroy all sense of high moral and religious responsibility. It reduces man to a mere machine. It cuts him off from his Maker, it hides from him the laws of God and leaves him to grope his way from time to eternity in the dark, under the arbitrary and despotic control of a frail, depraved, and sinful fellow-man. As the serpent-charmer of India is compelled to extract the deadly teeth of his venomous prey before he is able to handle him with impunity, so the slaveholder must strike down the conscience of the slave before he can obtain the entire mastery over his victim.<br><br> John C. Calhoun Quote<br><br> I am a Southern man and a slaveholder. A kind and merciful one, I trust, and none the worse for being a slaveholder. I say, for one, I would rather meet any extremity upon earth than give up one inch of our equality, one inch of what belongs to us as members of this republic! What! Acknowledged inferiority! The surrender of life is nothing to sinking down into acknowledged inferiority! ',
            question: "5. Based on the quotes, contrast John C. Calhoun’s position on slavery with that of Frederick Douglass? ",
            options: [
                "A. Calhoun believed that he was justified in being a slaveholder and worried about southerners losing their equality with northerners. Douglass believed that the institution of slavery stripped slaves of their humanity. ",
                "B. Calhoun felt remorseful about being a slaveholder and acknowledged the equality of slaves. Douglass believed that slaves are made in “the image of God”. ",
                "C. Calhoun believed that he was a kind and merciful slaveholder who was justified in standing up for the institution of slavery. Douglass felt that there were good slaveholders and bad slaveholders. ",
                "D. Douglass and Calhoun both agreed that the institution of slavery should be abolished in order to preserve the union."
            ],
            answer: "A",
            explanation: "Explanation: John C. Calhoun, a senator from South Carolina, is quoted as saying, “I am a Southern man and a slaveholder. A kind and merciful one, I trust, and none the worse for being a slaveholder.” This indicates that Calhoun felt completely justified in being a slaveholder, provided he treated his slaves with mercy. Calhoun seems to be concerned with the South’s equality with the North and not at all concerned with the equality of slaves. Frederick Douglass, a former slave, spoke of how slavery in any form, strips all dignity and humanity from the slaves. As stated by Douglass, “The first work of slavery is to mar and deface those characteristics of its victims which distinguish men from things, and persons from property.” He goes on to say that slaves are treated as mere machines. He believes that slaveholders must strip slaves of their humanity in order to control them. "
        },
    ],
    // Add more question sets as needed
];

let currentQuestionIndex = 0;
let userAnswers = [];
let score = 0;
let currentQuestionSet = 0;

function loadQuestion() {
    const passageContainer = document.querySelector('.passage');
    const questionContainer = document.querySelector('.multiple-choice');
    const currentQuestion = questionsSets[currentQuestionSet][currentQuestionIndex];

    passageContainer.innerHTML = `<p>${currentQuestion.passage}</p>`;

    questionContainer.innerHTML = `
        <p>${currentQuestion.question}</p>
        ${currentQuestion.options.map(option => `
            <label><input type="radio" name="question" value="${option.charAt(0)}"> ${option}</label>
        `).join('')}
        <p class="feedback" id="feedback"></p>
        <p class="explanation" id="explanation"></p>
    `;
}

function nextQuestion() {
    currentQuestionIndex++;
    if (currentQuestionIndex < questionsSets[currentQuestionSet].length) {
        loadQuestion();
        document.getElementById('btnCheck').style.display = 'block';
        document.getElementById('btnNext').style.visibility = 'hidden';
    } else {
        if (currentQuestionSet < questionsSets.length - 1) {
            showResults();
        } else {
            showFinalResults();
        }
    }
}

function checkAnswer() {
    const selectedOption = document.querySelector('input[name="question"]:checked');
    const feedback = document.getElementById('feedback');
    const explanation = document.getElementById('explanation');

    if (selectedOption) {
        const answer = selectedOption.value;
        userAnswers.push(answer);

        if (answer === questionsSets[currentQuestionSet][currentQuestionIndex].answer) {
            feedback.textContent = "Correct!";
            feedback.className = "feedback correct";
            score++;
        } else {
            feedback.textContent = "Incorrect.";
            feedback.className = "feedback incorrect";
        }
        explanation.textContent = questionsSets[currentQuestionSet][currentQuestionIndex].explanation;
        if (currentQuestionIndex === 4) {
            document.getElementById('btnCheck').style.display = 'none';
            document.getElementById('btnNext').style.visibility = 'visible';
            document.getElementById('btnNext').innerHTML = "Show Result";
        } else {
            document.getElementById('btnCheck').style.display = 'none';
            document.getElementById('btnNext').style.visibility = 'visible';
        }
        console.log(currentQuestionIndex);
    } else {
        feedback.textContent = "Please select an answer.";
        feedback.className = "feedback incorrect";
    }
}

function showResults() {
    const passageContainer = document.querySelector('.passage');

    passageContainer.innerHTML = `
        <div class="result-summary">
            <h2>Set ${currentQuestionSet + 1} Results</h2>
            <p>Your score: <span class="score">${score}</span> out of <span class="total">${questionsSets[currentQuestionSet].length}</span></p>
        </div>
        <div class="answer-review">
            <h3>Review Your Answers</h3>
            <ol class="review-list">
                ${userAnswers.map((answer, index) => `
                    <li class="review-item">
                        <p>Your answer: <span class="user-answer ${answer === questionsSets[currentQuestionSet][index].answer ? 'correct' : 'incorrect'}">${answer}</span></p>
                        <p>Correct answer: <span class="correct-answer">${questionsSets[currentQuestionSet][index].answer}</span></p>
                        <p class="explanation">${questionsSets[currentQuestionSet][index].explanation}</p>
                    </li>
                `).join('')}
            </ol>
        </div>
        <button id="next-set-btn" onclick="nextSet()">Next Set</button>
    `;
    document.getElementById('btnNext').style.visibility = 'hidden';
}

function showFinalResults() {
    const box = document.querySelector('.box');
    // passageContainer.style.flex-basis = '100%';

    const questionContainer = document.querySelector('.multiple-choice');
    questionContainer.style.display = 'none';


    box.innerHTML = `
        <div class='final-result'>
            <div class="result-summary">
                <h2>Final Results</h2>
                <p>Your overall score: <span class="score">${score}</span> out of <span class="total">${calculateTotalQuestions()}</span></p>
            </div>
            <div class="answer-review">
                <h3>Review Your Answers</h3>
                <ol class="review-list">
                    ${userAnswers.map((answer, index) => `
                        <li class="review-item">
                            <p>Your answer: <span class="user-answer ${answer === questionsSets[currentQuestionSet][index].answer ? 'correct' : 'incorrect'}">${answer}</span></p>
                            <p>Correct answer: <span class="correct-answer">${questionsSets[currentQuestionSet][index].answer}</span></p>
                            <p class="explanation">${questionsSets[currentQuestionSet][index].explanation}</p>
                        </li>
                    `).join('')}
                </ol>
            </div>
        </div>
        `;
    document.getElementById('btnNext').style.display = 'none';
    document.getElementById('btnGoBack').style.display = 'block';
}

function calculateTotalQuestions() {
    let total = 0;
    for (let i = 0; i < questionsSets.length; i++) {
        total += questionsSets[i].length;
    }
    return total;
}


window.onload = loadQuestion;
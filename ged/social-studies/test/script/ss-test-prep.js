const practiceTestOneAnswers = [
    ["B", 
        [
            "<b>1. B. The unemployment rate declined consistently until shortly before the war's end.</b>",
            "Checking the timeline, you can see that World War II began in 1939 and ended in 1945. Unemployment went down every year between 1939 and 1944, and rose just slightly in 1945. Thus, choice (B)'s description of the war's impact on unemployment is correct"
        ]
    ],
    ['A', 
        [
            '<b>2. A. the stock market crash immediately after the stock market crash in 1929, unemployment increased dramatically and directly until 1933.</b>', 
            'That makes choice (A) correct. After 1933, unemployment declines gradually until the end of the war, and the decline is interrupted by a small increase during 1937–1938.'
        ]
    ],
    ['D', 
        [
            '<b>3. D. The Seneca Falls Convention was a shocking and unnatural event that undermined the nature of women.</b>', 
            'There is no objective way to prove that something is “shocking and unnatural.” Those words reveal that the statement in choice (D) was the opinion of one newspaper’s editors.'
        ]
    ],
    ['D', 
        [
            '<b>4. D. The Seneca Falls Convention was important in the fight for women’s rights.</b>', 
            'The passage’s primary purpose is to explain how the women’s movement “gained strength” at the Seneca Falls Convention.'
        ]
    ],
    ['A', 
        [
            '<b>5. A. More than half of the reported cases of human plague in the United States between 1970 and 2010 were reported in four states.</b>', 
            'Even if you don’t recognize the four states in question as Arizona, California, Colorado, and New Mexico, the map clearly shows the overwhelming concentration of reported plague cases as occurring there. Choice (A) is justified by the information in the map.'
        ]
    ],
    ['C', 
        [
            '<b>6. C. Several cases of plague were reported on the East Coast of the United States between 1970 and 2010.</b>', 
            'The statement in choice (C) is clearly false given the information in the map. No cases of plague were recorded east of Illinois during the time period depicted by the map.'
        ]
    ],
    ['D', 
        [
            '<b>7. D. The effects of the cotton gin on the cotton industry actually led to an increased demand for slaves in the South.</b>', 
            'The fact stated in choice (D) is directly supported by the end of the passage where the writer explains the effects of the cotton gin: “with the boom of the cotton industry, more slaves were used to pick the cotton at a faster rate.”'
        ]
    ],
    ['C', 
        [
            '<b>8. C. 2,000,000 The increase in the number of cotton bales produced between 1840 and 1860 was approximately 3,500,000.</>', 
            'The increase in the number of slaves living in the United States during the same twenty year period was approximately 1,500,000. The difference between the two figures is 2,000,000.'
        ]
    ],
    ['C', 
        [
            '<b>9. C. In most years, the percent population increase in South Dakota was greater than that in North Dakota.</b>', 
            'Choice (C) is correct. In seven of the eleven years shown (every year from ‘01–’02 to ‘07–’08 ) South Dakota’s annual population increase was greater than that of North Dakota. The increases were approximately equal in ‘08–’09, and North Dakota’s increase was greater in the remaining three years. Choice (B) makes a statement about the populations of these states, but the graph only contains information about percent increase, or proportional increase, of the population.'
        ]
    ],
    ['C', 
        [
            '<b>10. C less than</b>', 
            'Though North Dakota had far greater growth than South Dakota toward the end of the period, North Dakota averaged an increase of approximately 0.77 percent per year over the 11 years, while South Dakota averaged approximately 0.93 percent per year.'
        ]
    ],
    ['D', 
        [
            '<b>11. D 70 percent </b>', 
            'GThe mean voter turnout for the years shown is 39.67 percent in midterm elections and 55.98 percent in presidential elections. 39.67 percent divided by 55.98 percent equals 70.9 percent.'
        ]
    ],
    ['C', 
        [
            '<b>12. C. 13.8 percent </b>', 
            '“Median” refers to the middle term in a set of numbers arranged from smallest to largest. Arrange the terms from the chart in order: 11.1 percent, 11.6 percent, 13.8 percent, 13.9 percent, 14.0 percent. The middle term is 13.8 percent, corresponding with the correct answer, choice (C).'
        ]
    ]
];

const practiceTestTwoAnswers = [
    ["A",
        [
            '1. “We the people . . . do ordain and establish” means that the people have the power. This is popular sovereignty.'
        ]
    ],
    ["A",
        [
            '2. The president makes treaties, but the Senate must approve. This is our system of checks and balances.'
        ]
    ],
    ["B",
        [
            '3. The amendments in the Bill of Rights establish the rights of the people and limit the powers of the federal government.'
        ]
    ],
    ["A",
        [
            '4. When production costs are lower, profits are higher. Suppliers increase supply to gain more of those higher profits.'
        ]
    ],
    ["D",
        [
            '5. In 1865 slavery is abolished; in 1868 citizenship is granted to former slaves; in 1870 African American men are given the right to vote.'
        ]
    ],
    ["C",
        [
            '6. Individual taxes account for 50.1% and business income taxes account for 11.9%. 50.1 ÷ 11.9 = 4.21. This is approximately four times more.'
        ]
    ],
    ["C",
        [
            '7. The chart states that market economies are highly productive and that mixed economies have the same benefits, though slightly reduced. Therefore, mixed economy is likely to be the second most productive.'
        ]
    ],
    ["A",
        [
            '8. A market economy has high freedom of choice and high innovation. This favors entrepreneurs.'
        ]
    ],
    ["D",
        [
            '9. The urban population in 1950 was approximately 63%. In 2010, it was approximately 78%. That is an increase of 15%.'
        ]
    ],
    ["B",
        [
            '10. Urban growth stayed the same from 1930–1940 and then again from 1970–1980. Only the 1930s is an answer choice.'
        ]
    ]
];

const practiceTestThreeAnswers = [
    ["B",
        [
            '1. The last paragraph says that the state law is unconstitutional.'
        ]
    ],
    ["D",
        [
            '2. The first and third paragraphs mention the supremacy of the U.S. Constitution.'
        ]
    ],
    ["A",
        [
            '3. According to the charts, the Missouri River is the longest at 2500 miles, and the Mississippi River has the largest drainage basin at approximately 1.15 million square miles.'
        ]
    ],
    ["C",
        [
            '4. If a river has many tributaries, it spreads out the drainage, resulting in a larger drainage basin.'
        ]
    ],
    ["B",
        [
            '5. The map shows that Florida became part of the United States through “Spanish Cession, 1819.”'
        ]
    ],
    ["A",
        [
            '6. The supply and demand lines meet at $1.25.'
        ]
    ],
    ["B",
        [
            '7. The top line on the graph in 2040 is for petroleum. '
        ]
    ],
    ["D",
        [   
            '8. They are not shown on the graph, so would be included in the category for “other.”'
        ]
    ],
    ["B",
        [
            '9. The steepest increase is for the natural gas line.'
        ]
    ]
];

const practiceTestFourAnswers = [
    ["D",
        [
            '1. The Voting Rights Act was passed in 1965 during the civil rights movement.'
        ]
    ],
    ["B",
        [
            '2. The Twenty-Sixth Amendment in 1971 gave 18-year-olds the right to vote.'
        ]
    ],
    ["C",
        [
            '3. White men who did not own property got the vote in the 1830s; women got the vote in 1920; Native Americans got the vote in 1924.'
        ]
    ],
    ["C",
        [
            '4. The demand for fresh foods would not increase because of an expected future price increase, as fresh food must be used very soon after purchase.'
        ]
    ],
    ["D",
        [
            '5. The passage discusses how a president may veto a bill and how Congress can override the veto.'
        ]
    ],
    ["C",
        [
            '6. President Wilson served during World War I.'
        ]
    ],
    ["D",
        [
            '7. The objection that some make to capital punishment is that it violates the Eighth Amendment ban on cruel and unusual punishment.'
        ]
    ],
    ["C",
        [
            '8. The Miranda warning is a reminder of the Fifth Amendment right not to testify against oneself and the Sixth Amendment right to legal counsel.'
        ]
    ],
    ["A",
        [
            '9. Enumeration here means listing each right one by one. The Ninth Amendment says that even though a right may not be specifically listed in the Constitution, it remains with the people.'
        ]
    ]
];

const practiceTestFiveAnswers = [
    ["A",
        [
            '1. Locke says that men are naturally free, so this is the philosophy of natural rights.'
        ]
    ],
    ["C",
        [
            '2. Natural rights are the same as “unalienable rights.”'
        ]
    ],
    ["B",
        [
            '3. The delegates were very concerned about limiting the power of the federal government since they had just fought a war to gain independence.'
        ]
    ],
    ["B",
        [
            '4. Both federal and state governments must have money to operate, and they have different tasks to accomplish.'
        ]
    ],
    ["D",
        [
            '5. Canada is a foreign country, so only the federal government may make trade agreements with Canada.'
        ]
    ],
    ["A",
        [
            '6. Federalism is the system of dividing, or sharing, power.'
        ]
    ],
    ["A",
        [
            '7. The biggest difference is that the British prime minister can disband Parliament. The U.S. president cannot disband Congress. '
        ]
    ],
    ["C",
        [
            '8. The current debate on gun control is based on the Second Amendment. '
        ]
    ],
    ["B",
        [
            '9. The Second Amendment specifies that it applies to a “well regulated Militia” and many people today argue that militias are no longer necessary because the United States has armed services and that regular citizens have no need of guns to defend the security of the state.'
        ]
    ]
];

const passageSection = document.querySelector('.passage');
const mcqSection = document.querySelector('.multiple-choice');
const feedbackSection = document.querySelector('.feedback');
const btnNext = document.getElementById('btnNext');
const btnBack = document.getElementById('btnPreviousPage');
const btnCheck = document.getElementById('btnCheck');
const btnGoBack = document.getElementById('btnGoBack');
const btnNextPage = document.getElementById('btnNextPage');
const maxPageNumArr = [12, 10, 9, 9, 9];
var maxPageNum;
var correctAnsArr = [];
let pageNumber = 1;
let grade=0;

btnNext.addEventListener('click', (e)=>{

    document.getElementById('quest'+pageNumber).classList.add('hide');
    document.getElementById('ans'+pageNumber).classList.add('hide');
    pageNumber<maxPageNum?pageNumber++:null;
    document.getElementById('quest'+pageNumber).classList.remove('hide');
    document.getElementById('ans'+pageNumber).classList.remove('hide');
    
    if(pageNumber===maxPageNum){
        btnNext.classList.add('hide');
        btnCheck.classList.remove('hide');
    }

    if(pageNumber>1){
        btnBack.classList.remove('hide');
    }
});

btnBack.addEventListener('click', (e)=>{
    document.getElementById('quest'+pageNumber).classList.add('hide');
    document.getElementById('ans'+pageNumber).classList.add('hide');
    pageNumber>1?pageNumber--:null;
    document.getElementById('quest'+pageNumber).classList.remove('hide');
    document.getElementById('ans'+pageNumber).classList.remove('hide');

    if(pageNumber!==maxPageNum){
        btnNext.classList.remove('hide');
        btnCheck.classList.add('hide');
    }
    if(pageNumber===1){
        btnBack.classList.add('hide');
    }
});

function checkAnswer(){
    var userInput = [];
    for (var j = 0; j <= maxPageNum;j++){
        //took group of radios by their names
        const selectedAnswer = document.getElementsByName("ans"+(j+1)+"");

        //this check for ALL 4 inputs under the same name
        for(var i = 0;i<selectedAnswer.length; i++){
            if(selectedAnswer[i].checked){ 
                userInput.push(selectedAnswer[i].value);
                break;
            } else {
                i===3?userInput.push('Unanswered'):null;
            }
        }
    }

    //correct answer - add grade | incorrect answer - add explanation
    for(var i=0;i< correctAnsArr.length;i++){
        //add grade
        if(userInput[i]===correctAnsArr[i][0]){
            grade++;
        }
    }

    //hide passage and multiple-choice
    passageSection.classList.add('hide');
    mcqSection.classList.add('hide');
    feedbackSection.classList.remove('hide');

    //display "Final Results"
    const resultDIV = document.createElement('h2');
    resultDIV.innerHTML = 'Final Results';
    resultDIV.setAttribute('class', 'final-result');
    //display "total grade"
    const gradeDIV = document.createElement('div');
    gradeDIV.setAttribute('class', 'grade');
    gradeDIV.innerHTML = `Your total grade is ${grade} out of ${correctAnsArr.length}`;
    //display "Review your answer"
    const reviewDIV = document.createElement('div');
    reviewDIV.setAttribute('class', 'review-ans');
    reviewDIV.innerHTML = 'Review your answer';

    feedbackSection.append(resultDIV);
    feedbackSection.append(gradeDIV);
    feedbackSection.append(reviewDIV);

    for(var i=0;i<correctAnsArr.length;i++){
        //add those from the loop above to HTML
        const explanationDIV = document.createElement('div');
        explanationDIV.setAttribute('class', 'exp');

        //create DIVs
        const yourAnsPara = document.createElement('p');
        const correctAnsPara = document.createElement('p');

        //assign text and values
        yourAnsPara.innerHTML = `Your answer is: ${userInput[i]}`;
        correctAnsPara.innerHTML = `Correct answer is: ${correctAnsArr[i][0]}`;
        explanationDIV.append(yourAnsPara);
        explanationDIV.append(correctAnsPara);

        //if inner array got one, works as one, if nested, works as nested.
        for(var exp of correctAnsArr[i][1]){
            const feedBackPara = document.createElement('p');
            feedBackPara.innerHTML = exp;
            explanationDIV.append(feedBackPara);
        }
        feedbackSection.append(explanationDIV);
    }

    btnCheck.classList.add('hide');
    btnBack.classList.add('hide');
    btnGoBack.classList.remove('hide');
    btnNextPage.classList.remove('hide');
}

function pageCheck(){

    if(window.location.href.includes('test-preparation-1')){

        correctAnsArr = practiceTestOneAnswers;
        maxPageNum = maxPageNumArr[0];
    } else if (window.location.href.includes('test-preparation-2')){

        correctAnsArr = practiceTestTwoAnswers;
        maxPageNum = maxPageNumArr[1];
    } else if (window.location.href.includes('test-preparation-3')){

        correctAnsArr = practiceTestThreeAnswers;
        maxPageNum = maxPageNumArr[2];
    } else if (window.location.href.includes('test-preparation-4')){

        correctAnsArr = practiceTestFourAnswers;
        maxPageNum = maxPageNumArr[3];
    } else {

        correctAnsArr = practiceTestFiveAnswers;
        maxPageNum = maxPageNumArr[4];
    }

    console.log('Page URL is checked!');
}


window.onload = pageCheck();